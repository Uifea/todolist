const taskWrapper=document.querySelector(".task__list"),btnSubmit=document.querySelector(".form__btn"),formInput=document.querySelector(".form__descr"),btnDone=document.querySelector(".radio__done"),btnProgress=document.querySelector(".radio__progress"),labelDone=document.querySelector(".action__done"),labelProgress=document.querySelector(".action__progress");let countDone=0,countProgress=0,taskListDB=[{text:"Помыть посуду",status:"progress"},{text:"Погладить кота",status:"progress"},{text:"Поиграть с собакой",status:"complete"}],createTaskList=function(){taskWrapper.innerHTML="",countDone=0,countProgress=0,localStorage.getItem("taskList")||localStorage.setItem("taskList",JSON.stringify(taskListDB));let t=JSON.parse(localStorage.getItem("taskList"));t.forEach((t=>{createTask(t.text,t.status)})),labelDone.textContent=`Todo Done: ${countDone}`,labelProgress.textContent=`Todo On Progress: ${countProgress}`,document.querySelectorAll(".trash-btn").forEach(((e,s)=>{e.addEventListener("click",(()=>{t.splice(s,1),localStorage.setItem("taskList",JSON.stringify(t));let e=document.querySelectorAll(".task__item")[s];e.style.backgroundColor="#85858533",e.style.transform="translateY(50px)",e.style.opacity="0",setTimeout((function(){createTaskList()}),500)}))}));let e=function(e,s){t[e].status=s,localStorage.setItem("taskList",JSON.stringify(t)),createTaskList()};document.querySelectorAll(".done-btn").forEach(((t,s)=>{t.addEventListener("click",(()=>{let t=document.querySelectorAll(".task__item")[s];t.style.backgroundColor="#e8d0f57a",t.style.padding="25px",t.style.boxShadow="0 0 10px 5px #cd94e4",t.style.borderRadius="10px",t.style.letterSpacing="2px",setTimeout((function(){t.style.height="0",t.style.fonSize="0",t.style.padding="0",t.style.opacity="0"}),800),setTimeout((function(){e(s,"complete")}),2e3)}))})),document.querySelectorAll(".return-btn").forEach(((t,s)=>{t.addEventListener("click",(()=>{e(s,"progress")}))})),document.querySelectorAll(".edit-btn").forEach(((e,s)=>{e.addEventListener("click",(()=>{let e=document.querySelectorAll(".task__item")[s],o=e.querySelector(".task__descr").textContent;e.innerHTML=`<input type ="text" class="task__descr-edit" value ="${o}">\n                                        <div class="task__wrapper-btns">\n                                            <button class="done-btn">done</button>\n                                        </div>`;let n=e.querySelector(".done-btn"),r=document.querySelector(".task__descr-edit"),a=function(){t[s].text=r.value,localStorage.setItem("taskList",JSON.stringify(t)),createTaskList()};r.addEventListener("keydown",(t=>{"Enter"===t.code&&a()})),n.addEventListener("click",(()=>{a()}))}))})),btnSubmit.addEventListener("click",(t=>{if(t.preventDefault(),""===formInput.value)return;updateTaskDB=JSON.parse(localStorage.getItem("taskList"));let e=formInput.value;updateTaskDB.push({text:e,status:"progress"}),localStorage.setItem("taskList",JSON.stringify(updateTaskDB)),formInput.value="",createTaskList()}))},sortTaskList=function(t,e){"checked"==btnDone.dataset.checked&&("progress"===e?t.classList.add("hide"):t.classList.remove("hide")),"checked"==btnProgress.dataset.checked&&("complete"===e?t.classList.add("hide"):t.classList.remove("hide"))};btnDone.addEventListener("click",(()=>{btnProgress.dataset.checked="",btnDone.dataset.checked="checked",document.querySelectorAll(".task__item").forEach((t=>{t.style.opacity="0"})),setTimeout((function(){createTaskList()}),500)})),btnProgress.addEventListener("change",(()=>{btnDone.dataset.checked="",btnProgress.dataset.checked="checked",document.querySelectorAll(".task__item").forEach((t=>{t.style.opacity="0"})),setTimeout((function(){createTaskList()}),500)}));let createTask=function(t,e){let s=document.createElement("div");s.classList.add("task__item"),s.innerHTML=`<p class="task__descr">${t}</p>\n                                <div class="task__wrapper-btns">\n                                    <button class="trash-btn">trash</button>\n                                    <button class="return-btn">done</button>\n                                    <button class="edit-btn">edit</button>\n                                    <button class="done-btn">done</button>\n                                </div>`,"complete"===e?(s.classList.add("complete"),countDone++):countProgress++,s.draggable=!0,sortTaskList(s,e),taskWrapper.append(s)};createTaskList();